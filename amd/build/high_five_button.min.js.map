{"version":3,"file":"high_five_button.min.js","sources":["../src/high_five_button.js"],"sourcesContent":["// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n\n/* global confetti, M */\n\n/* global confetti */\n\ndefine(['jquery', 'core/notification'], function ($, Notification) {\n    return {\n        init: function () {\n            $('#make-high-five').on('click', function () {\n                // Send AJAX request to make the high five\n                $.ajax({\n                    url: M.cfg.wwwroot + '/local/high_five/make_high_five_ajax.php',\n                    type: 'POST',\n                    dataType: 'json',\n                    success: function (response) {\n                        if (response.status === 'success') {\n                            // Load the confetti library and trigger the effect\n                            const url = 'https://cdn.jsdelivr.net/npm/canvas-confetti@1.9.3/dist/confetti.browser.min.js';\n                            $.getScript(url).done(function () {\n                                if (typeof confetti !== 'undefined') {\n                                    confetti({\n                                        particleCount: 200,\n                                        spread: 70,\n                                        origin: { y: 0.9 }\n                                    });\n                                }\n                            });\n                            // Show success message and reload the page\n                            Notification.addNotification({\n                                message: response.message,\n                                type: 'success'\n                            });\n                            setTimeout(function () {\n                                window.location.reload();\n                            }, 2000); // Adjust delay as needed\n                        } else {\n                            // Show failure message\n                            Notification.addNotification({\n                                message: response.message,\n                                type: 'error'\n                            });\n                        }\n                    },\n                    error: function () {\n                        Notification.addNotification({\n                            message: 'An error occurred while processing the request.',\n                            type: 'error'\n                        });\n                    }\n                });\n            });\n        }\n    };\n});\n"],"names":["define","$","Notification","init","on","ajax","url","M","cfg","wwwroot","type","dataType","success","response","status","getScript","done","confetti","particleCount","spread","origin","y","addNotification","message","setTimeout","window","location","reload","error"],"mappings":"AAmBAA,OAAM,mCAAC,CAAC,SAAU,sBAAsB,SAAUC,EAAGC,cACjD,MAAO,CACHC,KAAM,WACFF,EAAE,mBAAmBG,GAAG,SAAS,WAE7BH,EAAEI,KAAK,CACHC,IAAKC,EAAEC,IAAIC,QAAU,2CACrBC,KAAM,OACNC,SAAU,OACVC,QAAS,SAAUC,UACf,GAAwB,YAApBA,SAASC,OAAsB,CAE/B,MAAMR,IAAM,kFACZL,EAAEc,UAAUT,KAAKU,MAAK,WACM,oBAAbC,UACPA,SAAS,CACLC,cAAe,IACfC,OAAQ,GACRC,OAAQ,CAAEC,EAAG,KAGzB,IAEAnB,aAAaoB,gBAAgB,CACzBC,QAASV,SAASU,QAClBb,KAAM,YAEVc,YAAW,WACPC,OAAOC,SAASC,QACnB,GAAE,IACP,MAEIzB,aAAaoB,gBAAgB,CACzBC,QAASV,SAASU,QAClBb,KAAM,SAGjB,EACDkB,MAAO,WACH1B,aAAaoB,gBAAgB,CACzBC,QAAS,kDACTb,KAAM,SAEd,GAER,GACJ,EAER"}